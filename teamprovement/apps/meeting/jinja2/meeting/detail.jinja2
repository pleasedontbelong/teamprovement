{% extends "base.jinja2" %}

{% block title %}Meeting: {{ meeting.name }}{% endblock %}

{% block content %}
  {% if meeting.is_participant(user) %}
    <a href="{{ url("topic_create", meeting_id=meeting.id) }}" class="btn btn-primary">New Topic</a>
  {% else %}
    <em>Only participants can create topics for this meeting</em>  
  {% endif %}
  <a href="{{ url('meeting_list') }}" class="float-right">&leftarrow;&nbsp;Back to meetings list</a>

    {% for topic in meeting.topics.all() %}
      <div class="card mt-4 border-{{ topic.mood | mood_class }}">
        <div class="card-header text-white bg-{{ topic.mood | mood_class }}">
            {{ topic.mood | mood_emoji }}
          <em class="float-right">{{ topic.creator }}</em>
        </div>
        <div class="card-body">
          <p class="card-text">
            <span>Fact:&nbsp;</span>
            <span class="text-{{ topic.mood | mood_class }}">{{ topic.fact }}</span>
          </p>
          <hr>
          <p class="card-text">
            <span>Feeling:&nbsp;</span>
            <span>{{ topic.feeling }}</span>
          </p>
        </div>
        <div class="card-footer">
          <div class="btn-group float-right" role="group" aria-label="Basic example">
              {% if topic.created_by(user) %}
                <a href="{{ url('topic_update', meeting.id, topic.id) }}" class="btn btn-sm btn-info">
                  <i class="fa fa-pencil-alt"></i>
                </a>
              {% endif %}
          </div>
        </div>
      </div>
    {% endfor %}
{% endblock %}
